{"version":3,"file":"productHandlers.js","names":["getData","getOne","removeOne","addOne","updateOne","getAllProducts","ctx","products","query","status","body","success","data","e","console","error","message","getSingleProduct","product","params","id","fields","log","Error","removeProduct","createProduct","request","updateProduct"],"sources":["../../../src/handlers/products/productHandlers.js"],"sourcesContent":["import {\n  getData,\n  getOne,\n  removeOne,\n  addOne,\n  updateOne,\n} from \"../../database/productRepository.js\";\n\nexport const getAllProducts = async (ctx) => {\n  try {\n    const products = getData(ctx.query);\n    ctx.status = 200;\n    return (ctx.body = {\n      success: true,\n      data: products,\n    });\n  } catch (e) {\n    console.error(e);\n    ctx.status = 404;\n    return (ctx.body = {\n      success: false,\n      error: e.message,\n    });\n  }\n};\n\nexport const getSingleProduct = async (ctx) => {\n  try {\n    const product = getOne(ctx.params.id, ctx.query.fields);\n    console.log(2);\n    if (!product) {\n      throw new Error(\"There's no product with that ID\");\n    }\n\n    ctx.status = 200;\n    return (ctx.body = {\n      success: true,\n      data: product,\n    });\n  } catch (e) {\n    console.error(e);\n\n    return (ctx.body = {\n      success: false,\n      error: e.message,\n    });\n  }\n};\n\nexport const removeProduct = async (ctx) => {\n  try {\n    const { id } = ctx.params;\n    const product = getOne(id);\n\n    if (!product) {\n      throw new Error(\"There's no product with that ID\");\n    }\n\n    removeOne(product);\n\n    ctx.status = 204;\n    return (ctx.body = {\n      success: true,\n      message: \"Deleted successfully!\",\n    });\n  } catch (e) {\n    console.error(e);\n    ctx.status = 404;\n    return (ctx.body = {\n      success: false,\n      error: e.message,\n    });\n  }\n};\n\nexport const createProduct = async (ctx) => {\n  try {\n    const product = ctx.request.body;\n    if (getOne(product.id)) {\n      throw new Error(\"Product has already existed\");\n    }\n\n    addOne(product);\n\n    ctx.status = 201;\n    return (ctx.body = {\n      success: true,\n      data: product,\n    });\n  } catch (e) {\n    console.error(e);\n    ctx.status = 400;\n    return (ctx.body = {\n      success: false,\n      error: e.message,\n    });\n  }\n};\n\nexport const updateProduct = async (ctx) => {\n  try {\n    const { body } = ctx.request;\n    const { id } = ctx.params;\n\n    const product = getOne(id);\n    if (!product) {\n      throw new Error(\"There's no product with that ID\");\n    }\n\n    updateOne(product, body);\n    ctx.status = 200;\n    return (ctx.body = {\n      success: true,\n    });\n  } catch (e) {\n    console.error(e);\n    ctx.status = 404;\n    return (ctx.body = {\n      success: false,\n      error: e.message,\n    });\n  }\n};\n"],"mappings":"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"}